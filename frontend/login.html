<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- PWA -->
<link rel="manifest" href="/static/manifest.json">
<meta name="theme-color" content="#635bff">

<!-- iOS support -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Nairobian Hub">
<link rel="apple-touch-icon" href="/static/icons/icon-192.png">

<title>Nairobian Hub | Login</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://rsms.me/inter/inter.css" rel="stylesheet">

<!-- Meta Pixel -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');

fbq('init', '1562977138152805');
fbq('track', 'PageView');
</script>

<noscript>
<img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1562977138152805&ev=PageView&noscript=1"/>
</noscript>

<style>

body {
    background: linear-gradient(135deg, #0f172a, #1e293b);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Inter', sans-serif;
    padding: 15px;
}

/* CARD */

.login-card {
    border-radius: 18px;
    overflow: hidden;
    max-width: 440px;
    width: 100%;
    box-shadow: 0 20px 50px rgba(0,0,0,0.35);
}

.card-body {
    background: #ffffff;
    padding: 2.2rem;
}

/* BRAND */

.brand-badge {
    width: 52px;
    height: 52px;
    border-radius: 14px;
    margin: 0 auto 12px;
    background: linear-gradient(135deg, #635bff, #7c3aed);
    box-shadow: 0 10px 25px rgba(99,91,255,0.35);
}

h3 {
    color: #0f172a;
    font-weight: 600;
}

.tagline {
    font-size: 0.95rem;
    color: #64748b;
    margin-bottom: 25px;
}

/* INPUTS */

.form-control {
    border-radius: 10px;
    padding-left: 42px;
    height: 46px;
}

.icon-wrapper {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: #94a3b8;
}

/* BUTTON */

.btn-primary {
    background: linear-gradient(135deg,#635bff,#7c3aed);
    border: none;
    border-radius: 10px;
    font-weight: 600;
}

.btn-primary:hover {
    opacity: 0.95;
}

/* FOOT LINKS */

a.text-primary {
    color: #635bff !important;
    font-weight: 600;
}

@media (max-width:576px){
    .card-body {
        padding: 1.6rem;
    }
}

</style>
</head>

<body>

<div class="card login-card">
<div class="card-body text-center">

    <div class="brand-badge"></div>

    <h3>NAIROBIAN HUB</h3>

    <p class="tagline">
        Stock Control System for managing products, branches and inventory operations in real time.
    </p>

<form action="/auth/login_form" method="POST" class="needs-validation" novalidate>

    <!-- Username -->
    <div class="mb-3 position-relative">
        <span class="icon-wrapper"><i class="bi bi-person"></i></span>
        <input
            type="text"
            name="username"
            class="form-control ps-5"
            placeholder="Username"
            required>
        <div class="invalid-feedback">Please enter your username.</div>
    </div>

    <!-- Password -->
    <div class="mb-3 position-relative">
        <span class="icon-wrapper"><i class="bi bi-lock"></i></span>
        <input
            type="password"
            name="password"
            class="form-control ps-5"
            placeholder="Password"
            required>
        <div class="invalid-feedback">Please enter your password.</div>
    </div>

    <!-- Remember -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" id="remember">
            <label class="form-check-label" for="remember">Remember Me</label>
        </div>
        <a href="#" class="text-primary text-decoration-none">Forgot Password?</a>
    </div>

    <!-- Submit -->
    <button type="submit" class="btn btn-primary w-100 py-2">
        Sign In
    </button>

</form>

</div>
</div>

<!-- SERVICE WORKER -->
<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/static/service-worker.js")
    .then(() => console.log("Service Worker registered"))
    .catch(err => console.error("SW registration failed:", err));
}
</script>

<!-- FB Registration Event -->
<script>
const url = new URL(window.location.href);
if (url.searchParams.get("new") === "1" && window.fbq) {
    fbq('track', 'CompleteRegistration');

    url.searchParams.delete("new");
    const cleanUrl =
        url.pathname +
        (url.searchParams.toString()
            ? "?" + url.searchParams.toString()
            : "");

    window.history.replaceState({}, "", cleanUrl);
}
</script>

</body>
</html>